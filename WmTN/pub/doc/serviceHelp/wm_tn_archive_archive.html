<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <meta name="Creator" content="stat17_update_1516_0241" />
    <title>wm.tn.archive:archive</title>
    <link rel="StyleSheet" href="css/_trading_networks_bis_reference_diba2.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <div class="Heading_2"><a name="ID0EZQFK">wm.tn.archive:archive</a></div>
    <div class="Body"><a name="ID0EDSFK">Archives documents and deletes documents from the </a><span class="ph">Trading Networks</span> database.</div>
    <div class="Section_Title"><a name="ID0EXSFK">Input Parameters</a></div>
    <table class="norules1" cellspacing="4" summary="">
      <tr>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 25%">
          <div class="Table_Cell"><span class="varname"><a name="ID0ECUFK">archiveAfterDays</a></span></div>
        </td>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 75%">
          <div class="Table_Cell"><span class="bisdatatype"><a name="ID0EOUFK">String</a></span> (optional) The maximum number of days to store a document in the production tables (since being received) before being archived. This service archives documents that have been in the database longer than the number of days you specify.</div>
          <div class="Table_Cell"><a name="ID0EZUFK">Specify a value from 0 through 730365. 0 indicates to not archive documents.</a></div>
          <div class="Table_Cell"><a name="ID0E5UFK">If you do not specify a value for </a><span class="varname">archiveAfterDays</span>, this service uses the setting of the <span class="codeph">tn.archive.archiveAfterDays</span> property in the <span class="ph">Trading Networks</span> properties file located in the directory, <span class="ph"> </span><span class="ph_002c_emphasis">Integration Server_directory</span><span class="ph"> </span>\instances\<span class="varname">instance_name</span>\packages\WmTN\config\properties.cnf.</div>
        </td>
      </tr>
      <tr>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top">
          <div class="Table_Cell"><span class="varname"><a name="ID0EHWFK">deleteAfterDays</a></span></div>
        </td>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top">
          <div class="Table_Cell"><span class="bisdatatype"><a name="ID0ETWFK">String</a></span> (optional) The maximum number of days that a document is to remain in the database (since it was received) before being deleted. This service deletes documents that have been in the database longer than the number of days you specify.</div>
          <div class="Table_Cell"><a name="ID0E5WFK">Specify a value from 0 through 730365. If you specify 0, </a><span class="ph">Trading Networks</span> does not delete documents.</div>
          <div class="Table_Cell"><a name="ID0EIXFK">If you do not specify a value for </a><span class="varname">deleteAfterDays</span>, this service uses the setting of the <span class="codeph">tn.archive.deleteAfterDays</span> property in the <span class="ph">Trading Networks</span> properties file. The <span class="ph">Trading Networks</span> properties file is in the directory, <span class="ph"> </span><span class="ph_002c_emphasis">Integration Server_directory</span><span class="ph"> </span>\instances\<span class="varname">instance_name</span>\packages\WmTN\config\properties.cnf.</div>
        </td>
      </tr>
    </table>
    <div class="Section_Title"><a name="ID0E3YFK">Output Parameters</a></div>
    <table class="norules1" cellspacing="4" summary="">
      <tr>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 25%">
          <div class="Table_Cell"><span class="varname"><a name="ID0EH1FK">archiveCount</a></span></div>
        </td>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top; width: 75%">
          <div class="Table_Cell"><span class="bisdatatype"><a name="ID0ET1FK">String</a></span> The number of documents that the service archived.</div>
        </td>
      </tr>
      <tr>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top">
          <div class="Table_Cell"><span class="varname"><a name="ID0EE2FK">deleteCount</a></span></div>
        </td>
        <td class="Table_Cell" style="padding-left: 2pt; padding-right: 2pt; vertical-align: top">
          <div class="Table_Cell"><span class="bisdatatype"><a name="ID0EQ2FK">String</a></span> The number of documents that the service deleted from the database.</div>
        </td>
      </tr>
    </table>
    <div class="Body"><a name="ID0EI3FK">When you run services such as </a><span class="apiname">wm.tn.archive:archive</span> or <span class="apiname">wm.tn.archive:extendedArchive</span>:</div>
    <div class="Numbered_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="Numbered_1_inner" style="width: 18pt; white-space: nowrap">1. </div>
          </td>
          <td width="100%">
            <div class="Numbered_1_inner"><a name="ID0E33FK">For each batch, based on the </a><span class="ph">Trading Networks</span> property <span class="apiname">tn.archive.batchSize</span>, the document IDs to be archived/deleted are copied to the ARCHIVE_WorkTable.</div>
          </td>
        </tr>
      </table>
    </div>
    <div class="Numbered_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="Numbered_1_inner" style="width: 18pt; white-space: nowrap">2. </div>
          </td>
          <td width="100%">
            <div class="Numbered_1_inner"><a name="ID0EW4FK">The document IDs are looped over and deleted.</a></div>
          </td>
        </tr>
      </table>
    </div>
    <div class="Numbered_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="Numbered_1_inner" style="width: 18pt; white-space: nowrap">3. </div>
          </td>
          <td width="100%">
            <div class="Numbered_1_inner"><a name="ID0EH5FK">Once the actual records are deleted, the records are deleted from the ARCHIVE_WorkTable.</a></div>
          </td>
        </tr>
      </table>
    </div>
    <div class="Numbered_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="Numbered_1_inner" style="width: 18pt; white-space: nowrap">4. </div>
          </td>
          <td width="100%">
            <div class="Numbered_1_inner"><a name="ID0EY5FK">If, for some reason, the job does not terminate normally, for example, the Oracle rollback segment overflows due to a large batch size, there might be leftover records in ARCHIVE_WorkTable. If this happens, these records have to be deleted before attempting another archive operation.</a></div>
          </td>
        </tr>
      </table>
    </div>
    <div class="Body"><a name="ID0EK6FK">Starting </a><span class="ph">Trading Networks</span> versions 10.1 or higher, archive stored procedures were introduced to streamline the process. You can manually delete the records by date, but this can be problematic with a large number of records due to the dependency on rollback segment sizing.</div>
    <div class="Body"><a name="ID0EU6FK">The </a><span class="apiname">tn.archive.batchSize</span> determines the number of records to commit per transaction, making the behavior easier to control.</div>
    <div class="Section_Title"><a name="ID0EHAGK">Usage Notes</a></div>
    <div class="List_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="List_1_inner" style="width: 18pt; white-space: nowrap">
              <img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" />
            </div>
          </td>
          <td width="100%">
            <div class="List_1_inner"><a name="ID0ESAGK">You can execute this service from time to time to conserve space in the system database. You can use </a><span class="ph">Integration Server Administrator</span> to schedule a user task to automatically execute this service periodically. You may not need this service for sites with large databases and that have one or more database administrators because such sites usually have their own archiving constraints.</div>
          </td>
        </tr>
      </table>
    </div>
    <div class="List_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="List_1_inner" style="width: 18pt; white-space: nowrap">
              <img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" />
            </div>
          </td>
          <td width="100%">
            <div class="List_1_inner"><a name="ID0EJBGK">If you do not specify </a><span class="varname">archiveAfterDays</span> and the <span class="codeph">tn.archive.archiveAfterDays</span> is not set in the <span class="ph">Trading Networks</span> properties file, the service deletes documents, but does not archive any documents.</div>
          </td>
        </tr>
      </table>
    </div>
    <div class="List_1_outer" style="margin-left: -18pt">
      <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
        <tr style="vertical-align: baseline">
          <td>
            <div class="List_1_inner" style="width: 18pt; white-space: nowrap">
              <img src="chapterTOC_bullet.png" alt="*" border="0" width="10" height="10" />
            </div>
          </td>
          <td width="100%">
            <div class="List_1_inner"><a name="ID0EJCGK">If the setting that controls deleting documents (either </a><span class="varname">deleteAfterDays</span> specified with the service or the <span class="codeph">tn.archive.deleteAfterDays</span>) is less than the setting that controls archiving documents (either <span class="varname">archiveAfterDays</span> specified with the service or the <span class="codeph">tn.archive.archiveAfterDays</span> property), this service does not archive files, only deletes them.</div>
          </td>
        </tr>
      </table>
    </div>
    <!-- SQ/SAG: insert custom footer -->
    <br />
    <hr style="border:1px solid; border-color: #1776BF; " />
    <div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 10px; margin-top: 6px; margin-bottom: 6px; text-align: center;">
      Copyright © 2007-2022 Software AG, Darmstadt, Germany and/or Software AG USA, Inc., Reston, VA, USA, and/or its subsidiaries and/or its affiliates and/or their licensors</div>
    <!-- SQ old code:
    <div style="font-family: Arial, Verdana, Helvetica, Sans-Serif; font-size: 12px; color: #0899cc; margin-top: 12px; padding-bottom: 6px; text-align: left; text-decoration: underline;">
	Copyright &#169; <span wwpage:content="wwvars:versionfirst">First cpyr from map</span><span wwpage:content="wwvars:versionlast">Last cpyr from map</span><span wwpage:content="copyright-first-b">First cpyr from book</span><span wwpage:content="copyright-last-b">Last cpyr from book</span>
		</div>
    -->
    <!-- SQ Variablen ausgeblendet
    <!-\- Copyright Test -\->
    <div style="text-decoration: underline">Copyright Import Test:</div>
    <wwpage:Import wwpage:content-from-file="Copyright/copyright_en.asp" />
    <br></br>
    
    <!-\- SQ Variables - Information from xresources-\->
    <div style="text-decoration: underline">From xresources:</div>
    <div>sag:organization-id == <span wwpage:content="sag:organization-id"></span></div>
    <div>sag:organization-name == <span wwpage:content="sag:organization-name"></span></div>
    <div>sag:organization-copyrholder == <span wwpage:content="sag:organization-copyrholder"></span></div>
    <div>sag:organization-url == <span wwpage:content="sag:organization-url"></span></div>
    
    <div>sag:family-id == <span wwpage:content="sag:family-id"></span></div>
    <div>sag:family-name == <span wwpage:content="sag:family-name"></span></div>
    <div>sag:family-organization == <span wwpage:content="sag:family-organization"></span></div>
    
    <div>sag:product-id == <span wwpage:content="sag:product-id"></span></div>
    <div>sag:product-name == <span wwpage:content="sag:product-name"></span></div>
    <div>sag:product-copyrfirst == <span wwpage:content="sag:product-copyrfirst"></span></div>
    <div>sag:product-family == <span wwpage:content="sag:product-family"></span></div>
    
    <!-\- SQ Variables - Values from DITA-Map-\->
    <br></br>
    <div style="text-decoration: underline">From DITA/Book-Map:</div>
    <div>ProdInfo Prodname == <span wwpage:replace="wwvars:ProdInfoProdName"></span></div>
    <div>ProdInfo Mod First == <span wwpage:replace="wwvars:ProdInfoModFirst"></span></div>
    <div>ProdInfo Mod Last == <span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
    <div>ProdInfo Rel First == <span wwpage:replace="wwvars:ProdInfoRelFirst"></span></div>
    <div>ProdInfo Rel Last == <span wwpage:replace="wwvars:ProdInfoRelLast"></span></div>
    <div>ProdInfo Vers First == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span></div>
    <div>ProdInfo Vers Last == <span wwpage:replace="wwvars:ProdInfoVersLast"></span></div>
    <div>ProdInfo vrm vers.rel.mod == <span wwpage:replace="wwvars:ProdInfoVersFirst"></span>.<span wwpage:replace="wwvars:ProdInfoRelLast"></span>.<span wwpage:replace="wwvars:ProdInfoModLast"></span></div>
    <div>BookID PartNo == <span wwpage:replace="wwvars:BookPartNo"></span></div>
    <div>othermeta release-version == <span wwpage:replace="wwvars:ReleaseVersion"></span></div>
    <div>othermeta release-date == <span wwpage:replace="wwvars:ReleaseDate"></span></div>
    <div>othermeta release-edition == <span wwpage:replace="wwvars:ReleaseEdition"></span></div>
    <div>othermeta product == <span wwpage:replace="wwvars:Product"></span></div>
    <br></br>
    <div style="text-decoration: underline">Reserve:</div>
    <div>organization == <span wwpage:content="organization"></span></div>
    <div>product-name == <span wwpage:content="product-name"></span></div>
    <div>copyright-first == <span wwpage:content="copyright-first"></span></div>
    <div>copyright-last == <span wwpage:content="copyright-last"></span></div>
    <div>copyright-first-b == <span wwpage:content="wwvars:copyright-first-b"></span></div>
    <div>copyright-last-b == <span wwpage:content="copyright-last-b"></span></div>
    <div>doc-id-one == <span wwpage:content="doc-id-one"></span></div>
    <div>doc-id-two == <span wwpage:content="doc-id-two"></span></div>-->
  </body>
</html>